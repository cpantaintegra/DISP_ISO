<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition template="/template/platform/MainTamplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:define name="head">
        <title>Ingresar Producto</title>
        <script type="text/javascript">
                //<![CDATA[
            function start() {
                PF('statusDialog').show();
            }

            function stop() {
                PF('statusDialog').hide();
            }
                //]]>
        </script>    
    </ui:define>
    <ui:define name="body">
        <ui:insert name="header">
            <ui:include src="../template/platform/header.xhtml"/>
        </ui:insert>
        <div class="container-fluid">
            <h:form id="forma" class="form-horizontal" enctype="multipart/form-data">
                <p:growl id="mensajesGrowl" showDetail="true" life="8000" />
                <div class="row">
                    <div class="col-lg-2 col-md-2 col-sm-2"></div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <div class="form-group">
                            <div class="col-sm-4">
                                <h:outputLabel title="Processar o arquivo inicial" class="control-label" value="Arquivo inicial:"></h:outputLabel>
                            </div>
                            <div class="col-lg-12">
                                <table>
                                    <tr>
                                        <td style="width: 850px" >
                                            <p:fileUpload value="#{procesoArchivo.file}" mode="simple" allowTypes="/(\\.|\\/)(txt)$/"
                                                          invalidFileMessage="Arquivo incorreto."/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <div class="form-group">
                            <div class="col-sm-4">
                                <h:outputLabel title="Processar o arquivo final" class="control-label" value="Arquivo final:"></h:outputLabel>
                            </div>
                            <div class="col-lg-12">
                                <table>
                                    <tr>
                                        <td style="width: 850px" >
                                            <p:fileUpload value="#{procesoArchivo.file1}" mode="simple" />
                                        </td>
                                        <td>
                                            <h:commandLink value="Gerar" action="#{procesoArchivo.procesaArchivo()}" styleClass="btn-primary btn-sm act-submit"></h:commandLink>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-2"></div>
                </div>
                <p class="text-center">
                    <h:form>   
                        <p:commandButton value="Baixar" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="pi pi-arrow-down">
                            <p:fileDownload value="#{fileDownloadView.file}" />
                        </p:commandButton>      
                    </h:form>
                </p>
            </h:form>
            <h:outputText value="#{procesoArchivo.mensaje}" class="control-label"></h:outputText>
        </div>
        <ui:insert name="footer">
            <ui:include src="../template/platform/footer.xhtml"/>
        </ui:insert>
    </ui:define>
</ui:composition>

